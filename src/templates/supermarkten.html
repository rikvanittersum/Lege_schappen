{% extends "header.html" %}
{% block content %}


<div id="app">
  <table>
      <thead>
          <tr>
              <th>Supermarkt</th>
              <th>Adres</th>
              <th>Plaats</th>
          </tr>
        </thead>
      <tbody is="ok" v-for="supermarkt in supermarkten" :supermarkt="supermarkt" :key="supermarkt"></tbody>
  </table>
</div>

<script type='text/javascript'>
        var supermarkten = {{ supermarkten|safe }};
        var show = false;
</script>

<script>

  Vue.component('ok', {
  props: ['supermarkt'],
  data(){ return{
    isHidden: false,
  }},
  {% verbatim %}
  template: `<tbody>
  <tr style="cursor:pointer" v-on:click="isHidden = !isHidden" >
    <td>{{ supermarkt.bedrijf }}</td>
    <td>{{  supermarkt.adres }}</td>
    <td>{{  supermarkt.plaatsnaam }}</td>
  </tr>
  <tr v-show="isHidden" v-for='product in supermarkt.uitverkochte_producten.split(",")'><a>{{product}}</a></tr>
  </tbody>
  `
  {% endverbatim %}
})
    var app = new Vue({
      delimiters: ['[[', ']]'],
      el: '#app',
      data: {
          supermarkten: supermarkten,
      },
      methods: {
           greet: function(string) {
               return string.split(",")
          },
      }
    });

</script>

{% endblock %}